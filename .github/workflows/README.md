# Visual Studio 中的 C++ 項目建構流程及概念

在 Visual Studio 中進行 C++ 項目建構時，整個過程包括編譯和鏈接步驟，根據項目配置和代碼生成不同類型的輸出文件。

## 建構流程

1. **預處理**：處理源代碼中的預處理指令，如 `#include`、`#define`、條件編譯指令等。
2. **編譯**：將預處理後的源代碼編譯成目標文件（`.obj`）。
3. **鏈接**：將目標文件與所需的庫文件鏈接，生成可執行文件（`.exe`）或庫文件（`.lib`/`.dll`）。

## 輸出文件類型

- **可執行文件（.exe）**：配置為應用程序時生成，包含所有代碼和資源，無需外部依賴即可運行。
- **靜態庫（.lib）**：配置為靜態庫時生成，包含編譯後的代碼，用於編譯時鏈接，增加可執行文件大小，但不需運行時分發。
- **動態鏈接庫（.dll）**：配置為動態庫時生成，運行時被加載和鏈接，可被多個程序共享，減少磁盤和內存佔用，需確保用戶運行時可訪問。

## 為何生成不同類型的文件

選擇生成 `.exe`、`.lib` 或 `.dll` 主要基於項目的配置和目標：

- **應用程序（.exe）配置**：目標是創建獨立運行的程序。
- **靜態庫（.lib）配置**：目標是創建可重用的代碼庫，直接整合到使用它們的應用程序中。
- **動態鏈接庫（.dll）配置**：目標是創建可在多個程序間共享的代碼庫，運行時加載。

## 選擇標準

- **部署需求**：需要易於分發的獨立應用程序選擇 `.exe`；代碼設計為供其他項目使用的庫，選擇 `.lib` 或 `.dll` 取決於是否希望動態鏈接。
- **更新和維護**：DLL 方便庫的更新和維護，無需重新編譯依賴該庫的應用程序。
- **性能和大小**：靜態庫可能提升性能但增加可執行文件大小；DLL 可減少磁盤佔用但可能略微降低性能。

## 如何設置

在 Visual Studio 中，通過以下步驟設置項目類型：

1. **打開項目屬性**：右鍵點擊項目，選擇“屬性”。
2. **配置類型**：在“配置屬性”->“常規”中，選擇“配置類型”，設置為“應用程序 (.exe)”、“靜態庫 (.lib)”或“動態鏈接庫 (.dll)”。
